function BOOMR_check_doc_domain(domain){var test;if(!domain){if(window.parent===window||!document.getElementById("boomr-if-as"))return;domain=document.domain}if(-1!==domain.indexOf(".")){try{return void(test=window.parent.document)}catch(err){document.domain=domain}try{return void(test=window.parent.document)}catch(err){domain=domain.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(domain)}}BOOMR_start=(new Date).getTime(),BOOMR_check_doc_domain(),function(w){var impl,boomr,d,myurl,createCustomEvent,dispatchEvent;w.parent!==w&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(w=w.parent,myurl=document.getElementById("boomr-if-as").src),d=w.document,w.BOOMR||(w.BOOMR={}),BOOMR=w.BOOMR,BOOMR.version||(BOOMR.version="0.9",BOOMR.window=w,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new w.CustomEvent("CustomEvent")&&(createCustomEvent=function(e_name,params){return new w.CustomEvent(e_name,params)})}catch(ignore){}try{!createCustomEvent&&d.createEvent&&d.createEvent("CustomEvent")&&(createCustomEvent=function(e_name,params){var evt=d.createEvent("CustomEvent");return params=params||{cancelable:!1,bubbles:!1},evt.initCustomEvent(e_name,params.bubbles,params.cancelable,params.detail),evt})}catch(ignore){}!createCustomEvent&&d.createEventObject&&(createCustomEvent=function(e_name,params){var evt=d.createEventObject();return evt.type=evt.propertyName=e_name,evt.detail=params.detail,evt}),createCustomEvent||(createCustomEvent=function(){return void 0})}(),dispatchEvent=function(e_name,e_data){var ev=createCustomEvent(e_name,{detail:e_data});ev&&BOOMR.setImmediate(function(){d.dispatchEvent?d.dispatchEvent(ev):d.fireEvent&&d.fireEvent("onpropertychange",ev)})},impl={beacon_url:"",beacon_type:"AUTO",site_domain:w.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",strip_query_string:!1,onloadfired:!1,handlers_attached:!1,events:{page_ready:[],page_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(type){return function(ev){var target;ev||(ev=w.event),ev.target?target=ev.target:ev.srcElement&&(target=ev.srcElement),3===target.nodeType&&(target=target.parentNode),target&&"OBJECT"===target.nodeName.toUpperCase()&&"application/x-shockwave-flash"===target.type||impl.fireEvent(type,target)}},fireEvent:function(e_name,data){var i,handler,handlers;if(e_name=e_name.toLowerCase(),!this.events.hasOwnProperty(e_name))return!1;for(this.public_events.hasOwnProperty(e_name)&&dispatchEvent(this.public_events[e_name],data),handlers=this.events[e_name],i=0;i<handlers.length;i++)try{handler=handlers[i],handler.fn.call(handler.scope,data,handler.cb_data)}catch(err){BOOMR.addError(err,"fireEvent."+e_name)}return!0}},boomr={t_lstart:null,t_start:BOOMR_start,t_end:null,url:myurl,utils:{objectToString:function(o,separator,nest_level){var k,value=[];if(!o||"object"!=typeof o)return o;if(void 0===separator&&(separator="\n	"),nest_level||(nest_level=0),"[object Array]"===Object.prototype.toString.call(o)){for(k=0;k<o.length;k++)value.push(nest_level>0&&null!==o[k]&&"object"==typeof o[k]?this.objectToString(o[k],separator+("\n	"===separator?"	":""),nest_level-1):encodeURIComponent(o[k]));separator=","}else for(k in o)Object.prototype.hasOwnProperty.call(o,k)&&value.push(nest_level>0&&null!==o[k]&&"object"==typeof o[k]?encodeURIComponent(k)+"="+this.objectToString(o[k],separator+("\n	"===separator?"	":""),nest_level-1):encodeURIComponent(k)+"="+encodeURIComponent(o[k]));return value.join(separator)},getCookie:function(name){if(!name)return null;name=" "+name+"=";var i,cookies;return cookies=" "+d.cookie+";",(i=cookies.indexOf(name))>=0?(i+=name.length,cookies=cookies.substring(i,cookies.indexOf(";",i))):null},setCookie:function(name,subcookies,max_age){var value,nameval,savedval,c,exp;if(!name||!impl.site_domain)return BOOMR.debug("No cookie name or site domain: "+name+"/"+impl.site_domain),!1;if(value=this.objectToString(subcookies,"&"),nameval=name+"="+value,c=[nameval,"path=/","domain="+impl.site_domain],max_age&&(exp=new Date,exp.setTime(exp.getTime()+1e3*max_age),exp=exp.toGMTString(),c.push("expires="+exp)),nameval.length<500){if(d.cookie=c.join("; "),savedval=this.getCookie(name),value===savedval)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+value+"\n"+savedval)}else BOOMR.warn("Cookie too long: "+nameval.length+" "+nameval);return!1},getSubCookies:function(cookie){var cookies_a,i,l,kv,gotcookies=!1,cookies={};if(!cookie)return null;if("string"!=typeof cookie)return BOOMR.debug("TypeError: cookie is not a string: "+typeof cookie),null;for(cookies_a=cookie.split("&"),i=0,l=cookies_a.length;l>i;i++)kv=cookies_a[i].split("="),kv[0]&&(kv.push(""),cookies[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]),gotcookies=!0);return gotcookies?cookies:null},removeCookie:function(name){return this.setCookie(name,{},-86400)},cleanupURL:function(url){return url?impl.strip_query_string?url.replace(/\?.*/,"?qs-redacted"):url:""},hashQueryString:function(url,stripHash){return url?(url.match(/^\/\//)&&(url=location.protocol+url),url.match(/^(https?|file):/)?(stripHash&&(url=url.replace(/#.*/,"")),BOOMR.utils.MD5?url.replace(/\?([^#]*)/,function(m0,m1){return"?"+(m1.length>10?BOOMR.utils.MD5(m1):m1)}):url):(BOOMR.error("Passed in URL is invalid: "+url),"")):url},pluginConfig:function(o,config,plugin_name,properties){var i,props=0;if(!config||!config[plugin_name])return!1;for(i=0;i<properties.length;i++)void 0!==config[plugin_name][properties[i]]&&(o[properties[i]]=config[plugin_name][properties[i]],props++);return props>0},addListener:function(el,type,fn){el.addEventListener?el.addEventListener(type,fn,!1):el.attachEvent&&el.attachEvent("on"+type,fn)},removeListener:function(el,type,fn){el.removeEventListener?el.removeEventListener(type,fn,!1):el.detachEvent&&el.detachEvent("on"+type,fn)},pushVars:function(arr,vars,prefix){var k,i,n=0;for(k in vars)if(vars.hasOwnProperty(k))if("[object Array]"===Object.prototype.toString.call(vars[k]))for(i=0;i<vars[k].length;++i)n+=BOOMR.utils.pushVars(arr,vars[k][i],k+"["+i+"]");else++n,arr.push(encodeURIComponent(prefix?prefix+"["+k+"]":k)+"="+(void 0===vars[k]||null===vars[k]?"":encodeURIComponent(vars[k])));return n},postData:function(urlenc){var iframe=document.createElement("iframe"),form=document.createElement("form"),input=document.createElement("input");iframe.name="boomerang_post",iframe.style.display=form.style.display="none",form.method="POST",form.action=impl.beacon_url,form.target=iframe.name,input.name="data",window.JSON?(form.enctype="text/plain",input.value=JSON.stringify(impl.vars)):(form.enctype="application/x-www-form-urlencoded",input.value=urlenc),document.body.appendChild(iframe),form.appendChild(input),document.body.appendChild(form),BOOMR.utils.addListener(iframe,"load",function(){document.body.removeChild(form),document.body.removeChild(iframe)}),form.submit()}},init:function(config){var i,k,properties=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string"];for(BOOMR_check_doc_domain(),config||(config={}),i=0;i<properties.length;i++)void 0!==config[properties[i]]&&(impl[properties[i]]=config[properties[i]]);void 0!==config.log&&(this.log=config.log),this.log||(this.log=function(){});for(k in this.plugins)if(this.plugins.hasOwnProperty(k)){if(config[k]&&config[k].hasOwnProperty("enabled")&&config[k].enabled===!1){impl.disabled_plugins[k]=1;continue}if(impl.disabled_plugins[k]&&delete impl.disabled_plugins[k],"function"==typeof this.plugins[k].init)try{this.plugins[k].init(config)}catch(err){BOOMR.addError(err,k+".init")}}return impl.handlers_attached?this:(impl.onloadfired||void 0!==config.autorun&&config.autorun===!1||(d.readyState&&"complete"===d.readyState?this.setImmediate(BOOMR.page_ready,null,null,BOOMR):w.onpagehide||null===w.onpagehide?boomr.utils.addListener(w,"pageshow",BOOMR.page_ready):boomr.utils.addListener(w,"load",BOOMR.page_ready)),boomr.utils.addListener(w,"DOMContentLoaded",function(){impl.fireEvent("dom_loaded")}),function(){var fire_visible,forms,iterator;for(fire_visible=function(){impl.fireEvent("visibility_changed")},d.webkitVisibilityState?boomr.utils.addListener(d,"webkitvisibilitychange",fire_visible):d.msVisibilityState?boomr.utils.addListener(d,"msvisibilitychange",fire_visible):d.visibilityState&&boomr.utils.addListener(d,"visibilitychange",fire_visible),boomr.utils.addListener(d,"mouseup",impl.xb_handler("click")),forms=d.getElementsByTagName("form"),iterator=0;iterator<forms.length;iterator++)boomr.utils.addListener(forms[iterator],"submit",impl.xb_handler("form_submit"));w.onpagehide||null===w.onpagehide||boomr.utils.addListener(w,"unload",function(){BOOMR.window=w=null})}(),impl.handlers_attached=!0,this)},page_ready:function(ev){return ev||(ev=w.event),ev||(ev={name:"load"}),impl.onloadfired?this:(impl.fireEvent("page_ready",ev),impl.onloadfired=!0,this)},setImmediate:function(fn,data,cb_data,cb_scope){var cb=function(){fn.call(cb_scope||null,data,cb_data||{}),cb=null};w.setImmediate?w.setImmediate(cb):w.msSetImmediate?w.msSetImmediate(cb):w.webkitSetImmediate?w.webkitSetImmediate(cb):w.mozSetImmediate?w.mozSetImmediate(cb):setTimeout(cb,10)},subscribe:function(e_name,fn,cb_data,cb_scope){var i,handler,ev,unload_handler;if(e_name=e_name.toLowerCase(),!impl.events.hasOwnProperty(e_name))return this;for(ev=impl.events[e_name],i=0;i<ev.length;i++)if(handler=ev[i],handler.fn===fn&&handler.cb_data===cb_data&&handler.scope===cb_scope)return this;return ev.push({fn:fn,cb_data:cb_data||{},scope:cb_scope||null}),"page_ready"===e_name&&impl.onloadfired&&this.setImmediate(fn,null,cb_data,cb_scope),"page_unload"===e_name&&(unload_handler=function(ev){fn&&fn.call(cb_scope,ev||w.event,cb_data)},w.onpagehide||null===w.onpagehide?boomr.utils.addListener(w,"pagehide",unload_handler):boomr.utils.addListener(w,"unload",unload_handler),boomr.utils.addListener(w,"beforeunload",unload_handler)),this},addError:function(err,src){"string"!=typeof err&&(err=String(err)),void 0!==src&&(err="["+src+":"+(new Date).getTime()+"] "+err),impl.errors[err]?impl.errors[err]++:impl.errors[err]=1},addVar:function(name,value){if("string"==typeof name)impl.vars[name]=value;else if("object"==typeof name){var k,o=name;for(k in o)o.hasOwnProperty(k)&&(impl.vars[k]=o[k])}return this},removeVar:function(arg0){var i,params;if(!arguments.length)return this;for(params=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(arg0)?arg0:arguments,i=0;i<params.length;i++)impl.vars.hasOwnProperty(params[i])&&delete impl.vars[params[i]];return this},requestStart:function(name){var t_start=(new Date).getTime();return BOOMR.plugins.RT.startTimer("xhr_"+name,t_start),{loaded:function(data){BOOMR.responseEnd(name,t_start,data)}}},responseEnd:function(name,t_start,data){BOOMR.plugins.RT.startTimer("xhr_"+name,t_start),impl.fireEvent("xhr_load",{name:"xhr_"+name,data:data})},sendBeacon:function(){var k,data,url,img,nparams,errors=[];BOOMR.debug("Checking if we can send beacon");for(k in this.plugins)if(this.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k])continue;if(!this.plugins[k].is_complete())return BOOMR.debug("Plugin "+k+" is not complete, deferring beacon send"),!1}impl.vars.v=BOOMR.version,impl.vars.u=BOOMR.utils.cleanupURL(d.URL.replace(/#.*/,"")),w!==window&&(impl.vars["if"]="");for(k in impl.errors)impl.errors.hasOwnProperty(k)&&errors.push(k+(impl.errors[k]>1?" (*"+impl.errors[k]+")":""));return errors.length>0&&(impl.vars.errors=errors.join("\n")),impl.errors={},impl.fireEvent("before_beacon",impl.vars),impl.beacon_url?(data=[],nparams=BOOMR.utils.pushVars(data,impl.vars),this.setImmediate(impl.fireEvent,"onbeacon",impl.vars,impl),nparams?(data=data.join("&"),"POST"===impl.beacon_type?BOOMR.utils.postData(data):(url=impl.beacon_url+(impl.beacon_url.indexOf("?")>-1?"&":"?")+data,url.length>2e3&&"AUTO"===impl.beacon_type?BOOMR.utils.postData(data):(BOOMR.debug("Sending url: "+url.replace(/&/g,"\n	")),img=new Image,img.src=url)),!0):this):(BOOMR.debug("No beacon_url, but would have sent: "+BOOMR.utils.objectToString(impl.vars)),!0)}},delete BOOMR_start,"number"==typeof BOOMR_lstart?(boomr.t_lstart=BOOMR_lstart,delete BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(boomr.t_lstart=BOOMR.window.BOOMR_lstart),function(){var make_logger;w.YAHOO&&w.YAHOO.widget&&w.YAHOO.widget.Logger?boomr.log=w.YAHOO.log:w.Y&&w.Y.log?boomr.log=w.Y.log:"object"==typeof console&&void 0!==console.log&&(boomr.log=function(m,l,s){console.log(s+": ["+l+"] "+m)}),make_logger=function(l){return function(m,s){return this.log(m,l,"boomerang"+(s?"."+s:"")),this}},boomr.debug=make_logger("debug"),boomr.info=make_logger("info"),boomr.warn=make_logger("warn"),boomr.error=make_logger("error")}(),function(){var ident;for(ident in boomr)boomr.hasOwnProperty(ident)&&(BOOMR[ident]=boomr[ident])}(),BOOMR.plugins=BOOMR.plugins||{},dispatchEvent("onBoomerangLoaded",{BOOMR:BOOMR}))}(window),function(){var connection;"object"==typeof navigator&&(connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection),connection&&(BOOMR.addVar("mob.ct",connection.type),BOOMR.addVar("mob.bw",connection.bandwidth),BOOMR.addVar("mob.mt",connection.metered))}(),function(){BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{};var restricted={redirectStart:"rt_red_st",redirectEnd:"rt_red_end",domainLookupStart:"rt_dns_st",domainLookupEnd:"rt_dns_end",connectStart:"rt_con_st",connectEnd:"rt_con_end",secureConnectionStart:"rt_scon_st",requestStart:"rt_req_st",responseStart:"rt_res_st"},impl={complete:!1,done:function(){var r,data,i,k,p=BOOMR.window.performance;if(!impl.complete){if(BOOMR.removeVar("restiming"),p&&"function"==typeof p.getEntriesByType&&(r=p.getEntriesByType("resource"))){for(BOOMR.info("Client supports Resource Timing API","restiming"),data={restiming:new Array(r.length)},i=0;i<r.length;++i){data.restiming[i]={rt_name:r[i].name,rt_in_type:r[i].initiatorType,rt_st:r[i].startTime,rt_dur:r[i].duration,rt_fet_st:r[i].fetchStart,rt_res_end:r[i].responseEnd};for(k in restricted)restricted.hasOwnProperty(k)&&r[i][k]>0&&(data.restiming[i][restricted[k]]=r[i][k])}BOOMR.addVar(data)}this.complete=!0,BOOMR.sendBeacon()}}};BOOMR.plugins.ResourceTiming={init:function(){return BOOMR.subscribe("page_ready",impl.done,null,impl),this},is_complete:function(){return impl.complete}}}(),function(){"use strict";function safe_add(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function binl_md5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=md5_ff(a,b,c,d,x[i],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),b=md5_ff(b,c,d,a,x[i+15],22,1236535329),a=md5_gg(a,b,c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=md5_hh(a,b,c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),b=md5_hh(b,c,d,a,x[i+2],23,-995338651),a=md5_ii(a,b,c,d,x[i],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd);return[a,b,c,d]}function binl2rstr(input){var i,output="";for(i=0;i<32*input.length;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function rstr2binl(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;for(i=0;i<8*input.length;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),8*s.length))}function rstr_hmac_md5(key,data){var i,hash,bkey=rstr2binl(key),ipad=[],opad=[];for(ipad[15]=opad[15]=void 0,bkey.length>16&&(bkey=binl_md5(bkey,8*key.length)),i=0;16>i;i+=1)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];return hash=binl_md5(ipad.concat(rstr2binl(data)),512+8*data.length),binl2rstr(binl_md5(opad.concat(hash),640))}function rstr2hex(input){var x,i,hex_tab="0123456789abcdef",output="";for(i=0;i<input.length;i+=1)x=input.charCodeAt(i),output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(15&x);return output}function str2rstr_utf8(input){return unescape(encodeURIComponent(input))}function raw_md5(s){return rstr_md5(str2rstr_utf8(s))}function hex_md5(s){return rstr2hex(raw_md5(s))}function raw_hmac_md5(k,d){return rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d))}function hex_hmac_md5(k,d){return rstr2hex(raw_hmac_md5(k,d))}function md5(string,key,raw){return key?raw?raw_hmac_md5(key,string):hex_hmac_md5(key,string):raw?raw_md5(string):hex_md5(string)}BOOMR=BOOMR||{},BOOMR.utils&&BOOMR.utils.md5||(BOOMR.utils=BOOMR.utils||{},BOOMR.utils.MD5=md5)}(),function(){if(BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.NavigationTiming){var impl={complete:!1,done:function(){var p,pn,pt,data,w=BOOMR.window;return this.complete?this:(p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance,p&&p.timing&&p.navigation&&(BOOMR.info("This user agent supports NavigationTiming.","nt"),pn=p.navigation,pt=p.timing,data={nt_red_cnt:pn.redirectCount,nt_nav_type:pn.type,nt_nav_st:pt.navigationStart,nt_red_st:pt.redirectStart,nt_red_end:pt.redirectEnd,nt_fet_st:pt.fetchStart,nt_dns_st:pt.domainLookupStart,nt_dns_end:pt.domainLookupEnd,nt_con_st:pt.connectStart,nt_con_end:pt.connectEnd,nt_req_st:pt.requestStart,nt_res_st:pt.responseStart,nt_res_end:pt.responseEnd,nt_domloading:pt.domLoading,nt_domint:pt.domInteractive,nt_domcontloaded_st:pt.domContentLoadedEventStart,nt_domcontloaded_end:pt.domContentLoadedEventEnd,nt_domcomp:pt.domComplete,nt_load_st:pt.loadEventStart,nt_load_end:pt.loadEventEnd,nt_unload_st:pt.unloadEventStart,nt_unload_end:pt.unloadEventEnd},pt.secureConnectionStart&&(data.nt_ssl_st=pt.secureConnectionStart),pt.msFirstPaint&&(data.nt_first_paint=pt.msFirstPaint),BOOMR.addVar(data)),w.chrome&&w.chrome.loadTimes&&(pt=w.chrome.loadTimes(),pt&&(data={nt_spdy:pt.wasFetchedViaSpdy?1:0,nt_first_paint:pt.firstPaintTime},BOOMR.addVar(data))),this.complete=!0,void BOOMR.sendBeacon())}};BOOMR.plugins.NavigationTiming={init:function(){return BOOMR.subscribe("page_ready",impl.done,null,impl),BOOMR.subscribe("page_unload",impl.done,null,impl),this},is_complete:function(){return impl.complete}}}}(),function(w){var impl,d=w.document;BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT||(impl={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,cached_t_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},updateCookie:function(params,timer){var t_end,t_start,subcookies,k;if(!this.cookie)return!1;if(subcookies=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{},"object"==typeof params)for(k in params)params.hasOwnProperty(k)&&(void 0===params[k]?subcookies.hasOwnProperty(k)&&delete subcookies[k]:(("nu"===k||"r"===k)&&(params[k]=BOOMR.utils.hashQueryString(params[k],!0)),subcookies[k]=params[k]));return t_start=(new Date).getTime(),timer&&(subcookies[timer]=t_start),BOOMR.debug("Setting cookie (timer="+timer+")\n"+BOOMR.utils.objectToString(subcookies),"rt"),BOOMR.utils.setCookie(this.cookie,subcookies,this.cookie_exp)?(t_end=(new Date).getTime(),t_end-t_start>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+t_start+" -> "+t_end,"rt")),!0):(BOOMR.error("cannot set start cookie","rt"),!1)},initFromCookie:function(){var url,subcookies;subcookies=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),subcookies&&(subcookies.s=Math.max(+subcookies.ul||0,+subcookies.cl||0),BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(subcookies),"rt"),subcookies.s&&(subcookies.r||subcookies.nu)&&(this.r=subcookies.r,url=BOOMR.utils.hashQueryString(d.URL,!0),BOOMR.debug(this.r+" =?= "+this.r2,"rt"),BOOMR.debug(subcookies.s+" <? "+(+subcookies.cl+15),"rt"),BOOMR.debug(subcookies.nu+" =?= "+url,"rt"),!this.strict_referrer||subcookies.nu&&subcookies.nu===url&&subcookies.s<+subcookies.cl+15||subcookies.s===+subcookies.ul&&this.r===this.r2?(this.t_start=subcookies.s,+subcookies.hd>subcookies.s&&(this.t_fb_approx=parseInt(subcookies.hd,10))):this.t_start=this.t_fb_approx=void 0),this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0}))},getBoomerangTimings:function(){var res,k,urls,url;BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window.performance&&window.performance.getEntriesByName){urls={"rt.bmr.":BOOMR.url};for(url in urls)if(urls.hasOwnProperty(url)&&urls[url]){if(res=window.performance.getEntriesByName(urls[url]),!res||0===res.length)continue;res=res[0];for(k in res)res.hasOwnProperty(k)&&k.match(/(Start|End)$/)&&res[k]>0&&BOOMR.addVar(url+k.replace(/^(...).*(St|En).*$/,"$1$2"),res[k])}}}catch(e){BOOMR.addError(e,"rt.getBoomerangTimings")}},checkPreRender:function(){return d.visibilityState&&"prerender"===d.visibilityState||d.msVisibilityState&&3===d.msVisibilityState?(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),BOOMR.subscribe("visibility_changed",BOOMR.plugins.RT.done,"visible",BOOMR.plugins.RT),!0):!1},initFromNavTiming:function(){var ti,p,source;this.navigationStart||(p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance,p&&p.navigation&&(this.navigationType=p.navigation.type),p&&p.timing?ti=p.timing:w.chrome&&w.chrome.csi&&w.chrome.csi().startE?(ti={navigationStart:w.chrome.csi().startE},source="csi"):w.gtbExternal&&w.gtbExternal.startE()&&(ti={navigationStart:w.gtbExternal.startE()},source="gtb"),ti?(BOOMR.addVar("rt.start",source||"navigation"),this.navigationStart=ti.navigationStart||ti.fetchStart||void 0,this.responseStart=ti.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=ti.unloadEventStart||ti.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},setPageLoadTimers:function(t_done){return impl.initFromCookie(),impl.initFromNavTiming(),impl.checkPreRender()?!1:(impl.responseStart?(BOOMR.plugins.RT.endTimer("t_resp",impl.responseStart),impl.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",impl.timers.t_load.end-impl.responseStart):BOOMR.plugins.RT.setTimer("t_page",t_done-impl.responseStart)):impl.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):impl.t_fb_approx&&(BOOMR.plugins.RT.endTimer("t_resp",impl.t_fb_approx),BOOMR.plugins.RT.setTimer("t_page",t_done-impl.t_fb_approx)),impl.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0)},setSupportingTimestamps:function(t_start){BOOMR.addVar("rt.tstart",t_start),"number"==typeof impl.t_start&&impl.t_start!==t_start&&BOOMR.addVar("rt.cstart",impl.t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart),BOOMR.addVar("rt.end",impl.timers.t_done.end)},determineTStart:function(ename,pgname){var t_start;return"xhr"===ename&&pgname&&impl.timers[pgname]?(t_start=impl.timers[pgname].start,BOOMR.addVar("rt.start","manual")):impl.navigationStart?t_start=impl.navigationStart:impl.t_start&&2!==impl.navigationType?(t_start=impl.t_start,BOOMR.addVar("rt.start","cookie")):impl.cached_t_start?t_start=impl.cached_t_start:(BOOMR.addVar("rt.start","none"),t_start=void 0),BOOMR.debug("Got start time: "+t_start,"rt"),impl.cached_t_start=t_start,t_start},page_ready:function(){this.onloadfired=!0},visibility_changed:function(){d.hidden||d.msHidden||d.webkitHidden||(impl.visiblefired=!0)},page_unload:function(edata){BOOMR.debug("Unload called with "+BOOMR.utils.objectToString(edata)+" when unloadfired = "+this.unloadfired,"rt"),this.unloadfired||BOOMR.plugins.RT.done(edata,"unload"),this.updateCookie({r:d.URL},"beforeunload"===edata.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(name,element,etarget,value_cb){var value;if(etarget){for(BOOMR.debug(name+" called with "+etarget.nodeName,"rt");etarget&&etarget.nodeName.toUpperCase()!==element;)etarget=etarget.parentNode;etarget&&etarget.nodeName.toUpperCase()===element&&(BOOMR.debug("passing through","rt"),value=value_cb(etarget),this.updateCookie({nu:value},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(value)))}},onclick:function(etarget){impl._iterable_click("Click","A",etarget,function(t){return t.href})},onsubmit:function(etarget){impl._iterable_click("Submit","FORM",etarget,function(t){var v=t.action||d.URL||"";return v.match(/\?/)?v:v+"?"})},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")}},BOOMR.plugins.RT={init:function(config){return BOOMR.debug("init RT","rt"),w!==BOOMR.window&&(w=BOOMR.window),d=w.document,BOOMR.utils.pluginConfig(impl,config,"RT",["cookie","cookie_exp","strict_referrer"]),impl.r=impl.r2=BOOMR.utils.hashQueryString(d.referrer,!0),impl.initFromCookie(),impl.getBoomerangTimings(),impl.initialized?this:(impl.complete=!1,impl.timers={},BOOMR.subscribe("page_ready",impl.page_ready,null,impl),impl.visiblefired=!(d.hidden||d.msHidden||d.webkitHidden),impl.visiblefired||BOOMR.subscribe("visibility_changed",impl.visibility_changed,null,impl),BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",impl.domloaded,null,impl),BOOMR.subscribe("page_unload",impl.page_unload,null,impl),BOOMR.subscribe("click",impl.onclick,null,impl),BOOMR.subscribe("form_submit",impl.onsubmit,null,impl),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),impl.initialized=!0,this)},startTimer:function(timer_name,time_value){return timer_name&&("t_page"===timer_name&&this.endTimer("t_resp",time_value),impl.timers[timer_name]={start:"number"==typeof time_value?time_value:(new Date).getTime()}),this},endTimer:function(timer_name,time_value){return timer_name&&(impl.timers[timer_name]=impl.timers[timer_name]||{},void 0===impl.timers[timer_name].end&&(impl.timers[timer_name].end="number"==typeof time_value?time_value:(new Date).getTime())),this},setTimer:function(timer_name,time_delta){return timer_name&&(impl.timers[timer_name]={delta:time_delta}),this},addTimersToBeacon:function(vars,source){var t_name,timer,t_other=[];for(t_name in impl.timers)if(impl.timers.hasOwnProperty(t_name)){if(timer=impl.timers[t_name],"number"!=typeof timer.delta&&("number"!=typeof timer.start&&(timer.start=impl.cached_t_start),timer.delta=timer.end-timer.start),isNaN(timer.delta))continue;impl.basic_timers.hasOwnProperty(t_name)?BOOMR.addVar(t_name,timer.delta):t_other.push(t_name+"|"+timer.delta)}t_other.length&&BOOMR.addVar("t_other",t_other.join(",")),"beacon"===source&&(impl.timers={},impl.complete=!1)},done:function(edata,ename){BOOMR.debug("Called done with "+BOOMR.utils.objectToString(edata)+", "+ename,"rt");var t_start,t_done=(new Date).getTime(),subresource=!1;return impl.complete=!1,"load"!==ename&&"visible"!==ename||impl.setPageLoadTimers(t_done)?("xhr"===ename&&edata&&edata.data&&(subresource=edata.data.subresource),t_start=impl.determineTStart(ename,edata?edata.name:null),this.endTimer("t_done",t_done),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld"),impl.setSupportingTimestamps(t_start),this.addTimersToBeacon(),"xhr"!==ename&&(BOOMR.addVar("r",BOOMR.utils.cleanupURL(impl.r)),impl.r2!==impl.r&&BOOMR.addVar("r2",BOOMR.utils.cleanupURL(impl.r2))),subresource&&BOOMR.addVar("rt.subres",1),impl.updateCookie(),"unload"===ename&&(BOOMR.addVar("rt.quit",""),impl.onloadfired||BOOMR.addVar("rt.abld",""),impl.visiblefired||BOOMR.addVar("rt.ntvu","")),impl.complete=!0,BOOMR.sendBeacon(),this):this},is_complete:function(){return impl.complete}})}(window),BOOMR.t_end=(new Date).getTime();
//# sourceMappingURL=boomerang-0.9.0.min.js.map